2025-03-17 12:18:40,625 - __main__ - INFO - === Starting intent merger training ===
2025-03-17 12:18:40,625 - __main__ - INFO - Parsing command line arguments...
2025-03-17 12:18:40,628 - __main__ - INFO - Arguments: Namespace(config='config.json', generate_only=False, enrich=False, augment=True, output='training/generated_training_data.json', model_output='models/intent_classifier_merged', early_stopping=True, epochs=40, batch_size=32, vocab_size=10000, embedding_dim=150, max_sequence_length=50, patience=8, validation_split=0.2, min_per_class=50, max_per_class=800, merge_classes=True, augmentation_factor=0.3, use_existing_data=True, debug=False)
2025-03-17 12:18:40,628 - __main__ - INFO - Preparing training data...
2025-03-17 12:18:40,637 - __main__ - INFO - Loading existing training data from training/generated_training_data.json
2025-03-17 12:18:40,639 - __main__ - INFO - Loaded 6679 examples from existing file
2025-03-17 12:18:40,639 - __main__ - INFO - Proceeding to model training...
2025-03-17 12:18:40,642 - __main__ - INFO - Starting model training process...
2025-03-17 12:18:40,647 - __main__ - INFO - Merged 16 intent classes into 12 classes
2025-03-17 12:18:40,647 - __main__ - INFO - Original classes: ['database_query_comparative_highest', 'database_query_comparative_lowest', 'database_query_comparative_middle', 'database_query_count', 'database_query_detailed', 'database_query_filter', 'database_query_list', 'database_query_recent', 'database_query_sensitive', 'database_query_sort', 'database_query_sort_ascending', 'database_query_sort_descending', 'database_query_specific_id', 'goodbye', 'greeting', 'help']
2025-03-17 12:18:40,647 - __main__ - INFO - Merged classes: ['database_query_comparative', 'database_query_count', 'database_query_detailed', 'database_query_filter', 'database_query_list', 'database_query_recent', 'database_query_sensitive', 'database_query_sort', 'database_query_specific_id', 'goodbye', 'greeting', 'help']
2025-03-17 12:18:40,650 - __main__ - INFO - Merged class counts: {'database_query_list': 360, 'database_query_detailed': 160, 'database_query_count': 321, 'database_query_sort': 2147, 'database_query_comparative': 1890, 'database_query_recent': 109, 'database_query_specific_id': 121, 'database_query_filter': 1524, 'database_query_sensitive': 7, 'greeting': 13, 'help': 13, 'goodbye': 14}
2025-03-17 12:18:40,651 - __main__ - INFO - Class database_query_sensitive: Duplicated from 7 to 56 examples
2025-03-17 12:18:40,651 - __main__ - INFO - Class greeting: Duplicated from 13 to 52 examples
2025-03-17 12:18:40,651 - __main__ - INFO - Class help: Duplicated from 13 to 52 examples
2025-03-17 12:18:40,651 - __main__ - INFO - Class goodbye: Duplicated from 14 to 56 examples
2025-03-17 12:18:40,653 - __main__ - INFO - After balancing: 5287 total examples
2025-03-17 12:18:40,653 - __main__ - INFO - Final class distribution: {'database_query_comparative': 1600, 'database_query_filter': 800, 'database_query_list': 360, 'database_query_count': 321, 'database_query_sort': 1600, 'help': 52, 'database_query_specific_id': 121, 'goodbye': 56, 'database_query_recent': 109, 'database_query_detailed': 160, 'database_query_sensitive': 56, 'greeting': 52}
2025-03-17 12:18:40,657 - __main__ - INFO - Original class distribution: {'database_query_comparative': 1600, 'database_query_filter': 800, 'database_query_list': 360, 'database_query_count': 321, 'database_query_sort': 1600, 'help': 52, 'database_query_specific_id': 121, 'goodbye': 56, 'database_query_recent': 109, 'database_query_detailed': 160, 'database_query_sensitive': 56, 'greeting': 52}
2025-03-17 12:18:40,659 - __main__ - INFO - Applying enhanced augmentation for database_query_comparative with 1600 examples
2025-03-17 12:18:40,676 - __main__ - INFO - Applying enhanced augmentation for database_query_sort with 1600 examples
2025-03-17 12:18:40,724 - __main__ - INFO - Created 4887 additional examples for database_query_comparative
2025-03-17 12:18:40,735 - __main__ - INFO - Created 3459 additional examples for database_query_sort
2025-03-17 12:18:40,737 - __main__ - INFO - After augmentation: 21340 examples
2025-03-17 12:18:40,737 - __main__ - INFO - Final class distribution: {'database_query_comparative': 10273, 'database_query_filter': 893, 'database_query_list': 454, 'database_query_count': 338, 'database_query_sort': 8899, 'help': 13, 'database_query_specific_id': 121, 'goodbye': 14, 'database_query_recent': 132, 'database_query_detailed': 179, 'database_query_sensitive': 11, 'greeting': 13}
2025-03-17 12:18:40,737 - __main__ - INFO - Tokenizing and preparing sequences...
2025-03-17 12:18:41,053 - __main__ - INFO - Training with 12 intent classes: ['database_query_comparative', 'database_query_count', 'database_query_detailed', 'database_query_filter', 'database_query_list', 'database_query_recent', 'database_query_sensitive', 'database_query_sort', 'database_query_specific_id', 'goodbye', 'greeting', 'help']
2025-03-17 12:18:41,053 - __main__ - INFO - Will save model to models/intent_classifier_merged
2025-03-17 12:18:42,153 - __main__ - INFO - Model architecture:
2025-03-17 12:18:42,153 - __main__ - INFO - Model: "model"
2025-03-17 12:18:42,154 - __main__ - INFO - __________________________________________________________________________________________________
2025-03-17 12:18:42,154 - __main__ - INFO -  Layer (type)                   Output Shape         Param #     Connected to                     
2025-03-17 12:18:42,154 - __main__ - INFO - ==================================================================================================
2025-03-17 12:18:42,154 - __main__ - INFO -  input_1 (InputLayer)           [(None, 50)]         0           []                               
2025-03-17 12:18:42,154 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,154 - __main__ - INFO -  embedding (Embedding)          (None, 50, 150)      1500000     ['input_1[0][0]']                
2025-03-17 12:18:42,154 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,154 - __main__ - INFO -  conv1d (Conv1D)                (None, 50, 128)      57728       ['embedding[0][0]']              
2025-03-17 12:18:42,154 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,154 - __main__ - INFO -  conv1d_1 (Conv1D)              (None, 50, 128)      76928       ['embedding[0][0]']              
2025-03-17 12:18:42,154 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,154 - __main__ - INFO -  conv1d_2 (Conv1D)              (None, 50, 128)      96128       ['embedding[0][0]']              
2025-03-17 12:18:42,154 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,154 - __main__ - INFO -  global_max_pooling1d (GlobalMa  (None, 128)         0           ['conv1d[0][0]']                 
2025-03-17 12:18:42,154 - __main__ - INFO -  xPooling1D)                                                                                      
2025-03-17 12:18:42,158 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,158 - __main__ - INFO -  global_max_pooling1d_1 (Global  (None, 128)         0           ['conv1d_1[0][0]']               
2025-03-17 12:18:42,158 - __main__ - INFO -  MaxPooling1D)                                                                                    
2025-03-17 12:18:42,158 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,158 - __main__ - INFO -  global_max_pooling1d_2 (Global  (None, 128)         0           ['conv1d_2[0][0]']               
2025-03-17 12:18:42,158 - __main__ - INFO -  MaxPooling1D)                                                                                    
2025-03-17 12:18:42,158 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,158 - __main__ - INFO -  concatenate (Concatenate)      (None, 384)          0           ['global_max_pooling1d[0][0]',   
2025-03-17 12:18:42,158 - __main__ - INFO -                                                                   'global_max_pooling1d_1[0][0]', 
2025-03-17 12:18:42,158 - __main__ - INFO -                                                                   'global_max_pooling1d_2[0][0]'] 
2025-03-17 12:18:42,158 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,158 - __main__ - INFO -  dropout (Dropout)              (None, 384)          0           ['concatenate[0][0]']            
2025-03-17 12:18:42,158 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,158 - __main__ - INFO -  dense (Dense)                  (None, 256)          98560       ['dropout[0][0]']                
2025-03-17 12:18:42,158 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,158 - __main__ - INFO -  dropout_1 (Dropout)            (None, 256)          0           ['dense[0][0]']                  
2025-03-17 12:18:42,158 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,158 - __main__ - INFO -  dense_1 (Dense)                (None, 12)           3084        ['dropout_1[0][0]']              
2025-03-17 12:18:42,158 - __main__ - INFO -                                                                                                   
2025-03-17 12:18:42,158 - __main__ - INFO - ==================================================================================================
2025-03-17 12:18:42,161 - __main__ - INFO - Total params: 1,832,428
2025-03-17 12:18:42,161 - __main__ - INFO - Trainable params: 1,832,428
2025-03-17 12:18:42,161 - __main__ - INFO - Non-trainable params: 0
2025-03-17 12:18:42,161 - __main__ - INFO - __________________________________________________________________________________________________
2025-03-17 12:18:42,161 - __main__ - INFO - Added early stopping with patience=8
2025-03-17 12:18:42,161 - __main__ - INFO - Starting training with 40 epochs...
2025-03-17 12:20:12,357 - __main__ - INFO - Validation accuracy progression: [0.7999062538146973, 0.8008434772491455, 0.8214620351791382, 0.845829427242279, 0.8006091713905334, 0.8385660648345947, 0.8327085375785828, 0.8608247637748718, 0.8648078441619873, 0.8683223724365234, 0.8720712065696716, 0.8680881261825562, 0.8659793734550476, 0.8608247637748718, 0.8603561520576477, 0.8608247637748718, 0.8601218461990356, 0.8631677627563477, 0.8605904579162598]
2025-03-17 12:20:12,357 - __main__ - INFO - Best validation accuracy: 0.8720712065696716
2025-03-17 12:20:12,357 - __main__ - INFO - Training complete. Saving model to models/intent_classifier_merged
2025-03-17 12:20:12,416 - model.intent_classifier - INFO - Model saved to models/intent_classifier_merged\model.h5
2025-03-17 12:20:12,424 - model.intent_classifier - INFO - Tokenizer saved to models/intent_classifier_merged\tokenizer.json
2025-03-17 12:20:12,425 - model.intent_classifier - INFO - Intent classes saved to models/intent_classifier_merged\intent_classes.json
2025-03-17 12:20:12,427 - model.intent_classifier - INFO - Model configuration saved to models/intent_classifier_merged\model_config.json
2025-03-17 12:20:12,427 - __main__ - INFO - Model saved successfully
2025-03-17 12:20:12,472 - __main__ - INFO - Additional model file saved to models/intent_classifier_merged\model.h5
2025-03-17 12:20:12,472 - __main__ - INFO - Intent mappings saved to models/intent_classifier_merged\intent_mappings.json
2025-03-17 12:20:12,472 - __main__ - INFO - Model training completed successfully
2025-03-17 12:20:12,472 - __main__ - INFO - === Training completed successfully ===
2025-03-17 15:06:43,699 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 15:06:43,699 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 15:06:43,699 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 15:06:43,699 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 15:06:43,699 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 15:06:43,702 - __main__ - INFO - All components initialized successfully
2025-03-17 15:06:45,769 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 15:06:45,769 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 15:06:45,772 - __main__ - INFO - Training API routes added successfully
2025-03-17 15:06:45,772 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 15:06:45,798 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.162:5000
2025-03-17 15:06:45,798 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-17 15:06:45,801 - werkzeug - INFO -  * Restarting with stat
2025-03-17 15:06:52,453 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 15:06:52,454 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 15:06:52,454 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 15:06:52,454 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 15:06:52,454 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 15:06:52,458 - __main__ - INFO - All components initialized successfully
2025-03-17 15:06:54,496 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 15:06:54,496 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 15:06:54,496 - __main__ - INFO - Training API routes added successfully
2025-03-17 15:06:54,496 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 15:06:54,510 - werkzeug - WARNING -  * Debugger is active!
2025-03-17 15:06:54,518 - werkzeug - INFO -  * Debugger PIN: 103-700-790
2025-03-17 15:06:54,555 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:06:54] "GET / HTTP/1.1" 200 -
2025-03-17 15:06:54,746 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:06:54] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-03-17 15:06:54,761 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:06:54] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-03-17 15:06:54,761 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:06:54] "[36mGET /static/js/speech.js HTTP/1.1[0m" 304 -
2025-03-17 15:07:00,095 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 15:07:00,095 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_list', 'confidence': 0.5}
2025-03-17 15:07:00,095 - query_processor - INFO - Direct query processing for: Show me all details about markets
2025-03-17 15:07:00,097 - query_processor - INFO - Generated SQL from natural language: SELECT markets.name, markets.location FROM markets LIMIT 100
2025-03-17 15:07:00,100 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:07:00] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 15:07:16,438 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 15:07:16,438 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_list', 'confidence': 0.5}
2025-03-17 15:07:16,438 - query_processor - INFO - Direct query processing for: show me all Traders
2025-03-17 15:07:16,438 - query_processor - INFO - Generated SQL from natural language: SELECT traders.name, traders.registration_date FROM traders LIMIT 100
2025-03-17 15:07:16,443 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:07:16] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 15:08:07,908 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 15:08:07,910 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_list', 'confidence': 0.5}
2025-03-17 15:08:07,910 - query_processor - INFO - Direct query processing for: Find traders with lowest transaction count
2025-03-17 15:08:07,910 - query_processor - INFO - Generated SQL from natural language: SELECT traders.name, traders.registration_date FROM traders, transactions LIMIT 100
2025-03-17 15:08:07,916 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:08:07] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 15:44:23,304 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 15:44:23,305 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 15:44:23,305 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 15:44:23,305 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 15:44:23,305 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 15:44:23,309 - __main__ - INFO - All components initialized successfully
2025-03-17 15:44:25,367 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 15:44:25,367 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 15:44:25,370 - __main__ - INFO - Training API routes added successfully
2025-03-17 15:44:25,370 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 15:44:25,389 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.171:5000
2025-03-17 15:44:25,389 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-17 15:44:25,391 - werkzeug - INFO -  * Restarting with stat
2025-03-17 15:44:31,717 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 15:44:31,718 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 15:44:31,718 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 15:44:31,718 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 15:44:31,718 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 15:44:31,721 - __main__ - INFO - All components initialized successfully
2025-03-17 15:44:33,786 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 15:44:33,786 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 15:44:33,788 - __main__ - INFO - Training API routes added successfully
2025-03-17 15:44:33,789 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 15:44:33,800 - werkzeug - WARNING -  * Debugger is active!
2025-03-17 15:44:33,806 - werkzeug - INFO -  * Debugger PIN: 103-700-790
2025-03-17 15:44:33,840 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:44:33] "GET / HTTP/1.1" 200 -
2025-03-17 15:44:33,960 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:44:33] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-03-17 15:44:34,030 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:44:34] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-03-17 15:44:34,033 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:44:34] "[36mGET /static/js/speech.js HTTP/1.1[0m" 304 -
2025-03-17 15:44:42,508 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 15:44:42,508 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_list', 'confidence': 0.5}
2025-03-17 15:44:42,508 - query_processor - INFO - Direct query processing for: List assets sorted by price in descending order
2025-03-17 15:44:42,508 - query_processor - INFO - Generated SQL from natural language: SELECT price_history.price_date, price_history.close_price, assets.name FROM orders, price_history, assets WHERE price_history.asset_id = assets.asset_id LIMIT 100
2025-03-17 15:44:42,516 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:44:42] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 15:47:11,007 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 15:47:11,007 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_list', 'confidence': 0.5}
2025-03-17 15:47:11,007 - query_processor - INFO - Direct query processing for: Find traders with lowest transaction count
2025-03-17 15:47:11,007 - query_processor - INFO - Generated SQL from natural language: SELECT traders.name, traders.registration_date FROM transactions, traders LIMIT 100
2025-03-17 15:47:11,013 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:47:11] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 15:47:47,494 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 15:47:47,494 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_list', 'confidence': 0.5}
2025-03-17 15:47:47,496 - query_processor - INFO - Direct query processing for: Sort trades by date in ascending order
2025-03-17 15:47:47,496 - query_processor - INFO - Generated SQL from natural language: SELECT orders.order_date, trades.trade_date FROM orders, trades WHERE orders.trade_id = trades.trade_id LIMIT 100
2025-03-17 15:47:47,498 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:47:47] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 15:48:22,966 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 15:48:22,966 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_list', 'confidence': 0.5}
2025-03-17 15:48:22,967 - query_processor - INFO - Direct query processing for: Display the assets with median price
2025-03-17 15:48:22,967 - query_processor - INFO - Generated SQL from natural language: SELECT price_history.price_date, price_history.close_price, assets.name FROM price_history, assets WHERE price_history.asset_id = assets.asset_id LIMIT 100
2025-03-17 15:48:22,970 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 15:48:22] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:16:42,137 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 16:16:42,137 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 16:16:42,139 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 16:16:42,139 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 16:16:42,139 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 16:16:42,142 - __main__ - INFO - All components initialized successfully
2025-03-17 16:16:44,211 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 16:16:44,211 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 16:16:44,213 - __main__ - INFO - Training API routes added successfully
2025-03-17 16:16:44,213 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 16:16:44,225 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.171:5000
2025-03-17 16:16:44,225 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-17 16:16:44,227 - werkzeug - INFO -  * Restarting with stat
2025-03-17 16:16:48,675 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 16:16:48,675 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 16:16:48,677 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 16:16:48,677 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 16:16:48,677 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 16:16:48,680 - __main__ - INFO - All components initialized successfully
2025-03-17 16:16:50,731 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 16:16:50,731 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 16:16:50,733 - __main__ - INFO - Training API routes added successfully
2025-03-17 16:16:50,733 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 16:16:50,742 - werkzeug - WARNING -  * Debugger is active!
2025-03-17 16:16:50,746 - werkzeug - INFO -  * Debugger PIN: 103-700-790
2025-03-17 16:16:50,772 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:16:50] "GET / HTTP/1.1" 200 -
2025-03-17 16:16:50,854 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:16:50] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-03-17 16:16:50,877 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:16:50] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-03-17 16:16:50,879 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:16:50] "[36mGET /static/js/speech.js HTTP/1.1[0m" 304 -
2025-03-17 16:18:57,764 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 16:18:57,764 - quick_intent_merger - INFO - Original ML classification: database_query_list with confidence 0.5
2025-03-17 16:18:57,764 - quick_intent_merger - INFO - Pattern matches: ['\\b(sort|order|arrange).*(descending|desc|high to low|largest to smallest)', '\\b(sort|order|arrange|list).*\\b(by|on)\\b']
2025-03-17 16:18:57,764 - quick_intent_merger - INFO - Low ML confidence (0.5). Using pattern match: {'intent': 'database_query_sort', 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:18:57,764 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:18:57,764 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:18:57,764 - model.chatbot_engine - INFO - Sub-intent: database_query_sort_descending, Parent intent: database_query_sort
2025-03-17 16:18:57,764 - query_processor - INFO - Processing query with intent: database_query_sort, sub-intent: database_query_sort_descending, confidence: 0.9
2025-03-17 16:18:57,765 - query_processor - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'sort_desc', 'constraints': []}
2025-03-17 16:18:57,765 - model.chatbot_engine - ERROR - Error processing user input: 'QueryProcessor' object has no attribute '_handle_list_query'
2025-03-17 16:18:57,766 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:18:57] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:32:29,494 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 16:32:29,494 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 16:32:29,496 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 16:32:29,496 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 16:32:29,496 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 16:32:29,500 - __main__ - INFO - All components initialized successfully
2025-03-17 16:32:31,555 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 16:32:31,556 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 16:32:31,557 - __main__ - INFO - Training API routes added successfully
2025-03-17 16:32:31,557 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 16:32:31,568 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.171:5000
2025-03-17 16:32:31,569 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-17 16:32:31,571 - werkzeug - INFO -  * Restarting with stat
2025-03-17 16:32:36,079 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 16:32:36,080 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 16:32:36,082 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 16:32:36,082 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 16:32:36,082 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 16:32:36,084 - __main__ - INFO - All components initialized successfully
2025-03-17 16:32:38,140 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 16:32:38,141 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 16:32:38,142 - __main__ - INFO - Training API routes added successfully
2025-03-17 16:32:38,142 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 16:32:38,151 - werkzeug - WARNING -  * Debugger is active!
2025-03-17 16:32:38,155 - werkzeug - INFO -  * Debugger PIN: 103-700-790
2025-03-17 16:32:38,179 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:32:38] "GET / HTTP/1.1" 200 -
2025-03-17 16:32:38,279 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:32:38] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-03-17 16:32:38,282 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:32:38] "[36mGET /static/js/speech.js HTTP/1.1[0m" 304 -
2025-03-17 16:32:38,284 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:32:38] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-03-17 16:32:43,796 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 16:32:43,796 - quick_intent_merger - INFO - Original ML classification: database_query_list with confidence 0.5
2025-03-17 16:32:43,797 - quick_intent_merger - INFO - Pattern matches: ['\\b(sort|order|arrange).*(descending|desc|high to low|largest to smallest)', '\\b(sort|order|arrange|list).*\\b(by|on)\\b']
2025-03-17 16:32:43,797 - quick_intent_merger - INFO - Low ML confidence (0.5). Using pattern match: {'intent': 'database_query_sort', 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:32:43,797 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:32:43,797 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:32:43,797 - model.chatbot_engine - INFO - Sub-intent: database_query_sort_descending, Parent intent: database_query_sort
2025-03-17 16:32:43,799 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'sort_desc', 'constraints': []}
2025-03-17 16:32:43,799 - query_processor - INFO - Processing query with intent: database_query_sort, sub-intent: database_query_sort_descending, confidence: 0.9
2025-03-17 16:32:43,799 - query_processor - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'sort_desc', 'constraints': []}
2025-03-17 16:32:43,799 - model.chatbot_engine - ERROR - Error processing user input: 'QueryProcessor' object has no attribute '_handle_list_query'
2025-03-17 16:32:43,799 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:32:43] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:41:04,119 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 16:41:04,120 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 16:41:04,121 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 16:41:04,121 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 16:41:04,121 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 16:41:04,125 - __main__ - INFO - All components initialized successfully
2025-03-17 16:41:06,179 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 16:41:06,179 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 16:41:06,181 - __main__ - INFO - Training API routes added successfully
2025-03-17 16:41:06,181 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 16:41:06,199 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.171:5000
2025-03-17 16:41:06,199 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-17 16:41:06,201 - werkzeug - INFO -  * Restarting with stat
2025-03-17 16:41:10,640 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 16:41:10,640 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 16:41:10,642 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 16:41:10,642 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 16:41:10,642 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 16:41:10,644 - __main__ - INFO - All components initialized successfully
2025-03-17 16:41:12,686 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 16:41:12,687 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 16:41:12,688 - __main__ - INFO - Training API routes added successfully
2025-03-17 16:41:12,689 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 16:41:12,696 - werkzeug - WARNING -  * Debugger is active!
2025-03-17 16:41:12,700 - werkzeug - INFO -  * Debugger PIN: 103-700-790
2025-03-17 16:41:12,725 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:41:12] "GET / HTTP/1.1" 200 -
2025-03-17 16:41:12,808 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:41:12] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-03-17 16:41:12,825 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:41:12] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-03-17 16:41:12,830 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:41:12] "[36mGET /static/js/speech.js HTTP/1.1[0m" 304 -
2025-03-17 16:41:17,054 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 16:41:17,055 - quick_intent_merger - INFO - Original ML classification: database_query_list with confidence 0.5
2025-03-17 16:41:17,062 - quick_intent_merger - INFO - Pattern matches: ['\\b(sort|order|arrange).*(descending|desc|high to low|largest to smallest)', '\\b(sort|order|arrange).*(ascending|asc|low to high|smallest to largest)', '\\b(sort|order|arrange|list).*\\b(by|on)\\b', '\\b(highest|maximum|most|top|greatest|largest|biggest)', '\\b(lowest|minimum|least|bottom|smallest|cheapest|worst)', '\\b(median|middle|average|mid|center|mean)', '\\b(show|display|list|get|find|retrieve)\\b.*\\b(all|every)\\b', '\\b(all details|more details|detailed|complete|all information|everything about|all data|show all|all fields|full record)', '\\b(recent|latest|newest|current|fresh|just added|new)', '\\b(where|with|having|that have|filter)\\b', '\\b(encrypted|sensitive|private|personal|email|contact|license|phone)']
2025-03-17 16:41:17,063 - quick_intent_merger - INFO - Low ML confidence (0.5). Using pattern match: {'intent': 'database_query_sort', 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:41:17,063 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:41:17,063 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:41:17,063 - model.chatbot_engine - INFO - Sub-intent: database_query_sort_descending, Parent intent: database_query_sort
2025-03-17 16:41:17,065 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'markets', 'attribute': 'transaction_count', 'aggregation': 'count', 'operation': 'max', 'constraints': [('original', 'logic')]}
2025-03-17 16:41:17,065 - query_processor - INFO - Processing query with intent: database_query_sort, sub-intent: database_query_sort_descending, confidence: 0.9
2025-03-17 16:41:17,066 - query_processor - INFO - Query semantics: {'entity_type': 'markets', 'attribute': 'transaction_count', 'aggregation': 'count', 'operation': 'max', 'constraints': [('original', 'logic')]}
2025-03-17 16:41:17,066 - query_processor - INFO - Generated SQL query: SELECT markets.name, markets.location, COUNT(transactions.transaction_id) as transaction_count FROM markets WHERE markets.market_id = trades.market_id AND traders.trader_id = trades.trader_id AND traders.trader_id = accounts.trader_id AND accounts.account_id = transactions.account_id GROUP BY markets.market_id ORDER BY transaction_count DESC LIMIT 10
2025-03-17 16:41:17,067 - database_connector - ERROR - Error executing query: 1054 (42S22): Unknown column 'transactions.transaction_id' in 'field list'
2025-03-17 16:41:17,068 - query_processor - INFO - No results returned from database
2025-03-17 16:41:17,068 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:41:17] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:41:24,548 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 16:41:24,549 - quick_intent_merger - INFO - Original ML classification: database_query_list with confidence 0.5
2025-03-17 16:41:24,549 - quick_intent_merger - INFO - Pattern matches: ['\\b(sort|order|arrange).*(descending|desc|high to low|largest to smallest)', '\\b(sort|order|arrange|list).*\\b(by|on)\\b']
2025-03-17 16:41:24,549 - quick_intent_merger - INFO - Low ML confidence (0.5). Using pattern match: {'intent': 'database_query_sort', 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:41:24,549 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:41:24,549 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:41:24,549 - model.chatbot_engine - INFO - Sub-intent: database_query_sort_descending, Parent intent: database_query_sort
2025-03-17 16:41:24,549 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'sort_desc', 'constraints': []}
2025-03-17 16:41:24,549 - query_processor - INFO - Processing query with intent: database_query_sort, sub-intent: database_query_sort_descending, confidence: 0.9
2025-03-17 16:41:24,551 - query_processor - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'sort_desc', 'constraints': []}
2025-03-17 16:41:24,551 - query_processor - INFO - Generated SQL query: SELECT assets.name, assets.asset_type, trades.price FROM assets WHERE assets.asset_id = trades.asset_id AND assets.asset_id = price_history.asset_id ORDER BY trades.price DESC LIMIT 10
2025-03-17 16:41:24,551 - database_connector - ERROR - Error executing query: 1054 (42S22): Unknown column 'trades.price' in 'field list'
2025-03-17 16:41:24,551 - query_processor - INFO - No results returned from database
2025-03-17 16:41:24,552 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:41:24] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:41:46,938 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 16:41:46,938 - quick_intent_merger - INFO - Original ML classification: database_query_list with confidence 0.5
2025-03-17 16:41:46,938 - quick_intent_merger - INFO - Pattern matches: ['\\b(highest|maximum|most|top|greatest|largest|biggest)', '\\b(where|with|having|that have|filter)\\b']
2025-03-17 16:41:46,938 - quick_intent_merger - INFO - Low ML confidence (0.5). Using pattern match: {'intent': 'database_query_comparative', 'sub_intent': 'database_query_comparative_highest'}
2025-03-17 16:41:46,938 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_highest'}
2025-03-17 16:41:46,938 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_highest'}
2025-03-17 16:41:46,938 - model.chatbot_engine - INFO - Sub-intent: database_query_comparative_highest, Parent intent: database_query_comparative
2025-03-17 16:41:46,939 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'trade_count', 'aggregation': 'count', 'operation': 'max', 'constraints': [('highest', 'account')]}
2025-03-17 16:41:46,939 - query_processor - INFO - Processing query with intent: database_query_comparative, sub-intent: database_query_comparative_highest, confidence: 0.9
2025-03-17 16:41:46,939 - query_processor - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'trade_count', 'aggregation': 'count', 'operation': 'max', 'constraints': [('highest', 'account')]}
2025-03-17 16:41:46,939 - query_processor - INFO - Generated SQL query: SELECT traders.name, traders.registration_date, COUNT(trades.trade_id) as trade_count FROM traders WHERE traders.trader_id = trades.trader_id GROUP BY traders.trader_id ORDER BY trade_count DESC LIMIT 10
2025-03-17 16:41:46,940 - database_connector - ERROR - Error executing query: 1054 (42S22): Unknown column 'trades.trade_id' in 'field list'
2025-03-17 16:41:46,940 - query_processor - INFO - No results returned from database
2025-03-17 16:41:46,941 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:41:46] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:44:31,002 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 16:44:31,003 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 16:44:31,004 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 16:44:31,005 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 16:44:31,005 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 16:44:31,007 - __main__ - INFO - All components initialized successfully
2025-03-17 16:44:33,053 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 16:44:33,054 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 16:44:33,055 - __main__ - INFO - Training API routes added successfully
2025-03-17 16:44:33,056 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 16:44:33,067 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.171:5000
2025-03-17 16:44:33,067 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-17 16:44:33,068 - werkzeug - INFO -  * Restarting with stat
2025-03-17 16:44:37,482 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 16:44:37,482 - __main__ - WARNING - Model not found at models/intent_classifier. Using uninitialized classifier.
2025-03-17 16:44:37,485 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 16:44:37,485 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 16:44:37,485 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 16:44:37,487 - __main__ - INFO - All components initialized successfully
2025-03-17 16:44:39,552 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 16:44:39,552 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 16:44:39,554 - __main__ - INFO - Training API routes added successfully
2025-03-17 16:44:39,554 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 16:44:39,562 - werkzeug - WARNING -  * Debugger is active!
2025-03-17 16:44:39,566 - werkzeug - INFO -  * Debugger PIN: 103-700-790
2025-03-17 16:44:39,591 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:44:39] "GET / HTTP/1.1" 200 -
2025-03-17 16:44:39,677 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:44:39] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-03-17 16:44:39,702 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:44:39] "[36mGET /static/js/speech.js HTTP/1.1[0m" 304 -
2025-03-17 16:44:39,705 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:44:39] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-03-17 16:44:44,769 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 16:44:44,769 - quick_intent_merger - INFO - Original ML classification: database_query_list with confidence 0.5
2025-03-17 16:44:44,770 - quick_intent_merger - INFO - Pattern matches: ['\\b(highest|maximum|most|top|greatest|largest|biggest)', '\\b(where|with|having|that have|filter)\\b']
2025-03-17 16:44:44,770 - quick_intent_merger - INFO - Low ML confidence (0.5). Using pattern match: {'intent': 'database_query_comparative', 'sub_intent': 'database_query_comparative_highest'}
2025-03-17 16:44:44,770 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_highest'}
2025-03-17 16:44:44,770 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_highest'}
2025-03-17 16:44:44,770 - model.chatbot_engine - INFO - Sub-intent: database_query_comparative_highest, Parent intent: database_query_comparative
2025-03-17 16:44:44,771 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'trade_count', 'aggregation': 'count', 'operation': 'max', 'constraints': [('highest', 'account')]}
2025-03-17 16:44:44,771 - query_processor - INFO - Processing query with intent: database_query_comparative, sub-intent: database_query_comparative_highest, confidence: 0.9
2025-03-17 16:44:44,772 - query_processor - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'trade_count', 'aggregation': 'count', 'operation': 'max', 'constraints': [('highest', 'account')]}
2025-03-17 16:44:44,772 - query_processor - INFO - Generated SQL query: SELECT traders.name, traders.registration_date, COUNT(trades.trade_id) as trade_count FROM traders JOIN trades ON traders.trader_id = trades.trader_id WHERE traders.trader_id = trades.trader_id GROUP BY traders.trader_id ORDER BY trade_count DESC LIMIT 10
2025-03-17 16:44:44,775 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:44:44] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:44:59,373 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 16:44:59,374 - quick_intent_merger - INFO - Original ML classification: database_query_list with confidence 0.5
2025-03-17 16:44:59,374 - quick_intent_merger - INFO - Pattern matches: ['\\b(sort|order|arrange).*(descending|desc|high to low|largest to smallest)', '\\b(sort|order|arrange|list).*\\b(by|on)\\b']
2025-03-17 16:44:59,374 - quick_intent_merger - INFO - Low ML confidence (0.5). Using pattern match: {'intent': 'database_query_sort', 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:44:59,374 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:44:59,374 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_descending'}
2025-03-17 16:44:59,374 - model.chatbot_engine - INFO - Sub-intent: database_query_sort_descending, Parent intent: database_query_sort
2025-03-17 16:44:59,375 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'sort_desc', 'constraints': []}
2025-03-17 16:44:59,375 - query_processor - INFO - Processing query with intent: database_query_sort, sub-intent: database_query_sort_descending, confidence: 0.9
2025-03-17 16:44:59,375 - query_processor - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'sort_desc', 'constraints': []}
2025-03-17 16:44:59,376 - query_processor - INFO - Generated SQL query: SELECT assets.name, assets.asset_type, trades.price FROM assets JOIN trades ON assets.asset_id = trades.asset_id JOIN price_history ON assets.asset_id = price_history.asset_id WHERE assets.asset_id = trades.asset_id AND assets.asset_id = price_history.asset_id ORDER BY trades.price DESC LIMIT 10
2025-03-17 16:44:59,388 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:44:59] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:45:10,337 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 16:45:10,337 - quick_intent_merger - INFO - Original ML classification: database_query_list with confidence 0.5
2025-03-17 16:45:10,337 - quick_intent_merger - INFO - Pattern matches: ['\\b(lowest|minimum|least|bottom|smallest|cheapest|worst)', '\\b(count|how many|number of|total number)', '\\b(where|with|having|that have|filter)\\b']
2025-03-17 16:45:10,337 - quick_intent_merger - INFO - Low ML confidence (0.5). Using pattern match: {'intent': 'database_query_comparative', 'sub_intent': 'database_query_comparative_lowest'}
2025-03-17 16:45:10,337 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_lowest'}
2025-03-17 16:45:10,337 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_lowest'}
2025-03-17 16:45:10,337 - model.chatbot_engine - INFO - Sub-intent: database_query_comparative_lowest, Parent intent: database_query_comparative
2025-03-17 16:45:10,337 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'transaction_count', 'aggregation': 'count', 'operation': 'min', 'constraints': [('lowest', 'transaction')]}
2025-03-17 16:45:10,338 - query_processor - INFO - Processing query with intent: database_query_comparative, sub-intent: database_query_comparative_lowest, confidence: 0.9
2025-03-17 16:45:10,338 - query_processor - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'transaction_count', 'aggregation': 'count', 'operation': 'min', 'constraints': [('lowest', 'transaction')]}
2025-03-17 16:45:10,338 - query_processor - INFO - Generated SQL query: SELECT traders.name, traders.registration_date, COUNT(transactions.transaction_id) as transaction_count FROM traders JOIN transactions ON traders.trader_id = accounts.trader_id AND accounts.account_id = transactions.account_id WHERE traders.trader_id = accounts.trader_id AND accounts.account_id = transactions.account_id GROUP BY traders.trader_id ORDER BY transaction_count ASC LIMIT 10
2025-03-17 16:45:10,339 - database_connector - ERROR - Error executing query: 1054 (42S22): Unknown column 'accounts.trader_id' in 'where clause'
2025-03-17 16:45:10,339 - query_processor - INFO - No results returned from database
2025-03-17 16:45:10,340 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:45:10] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:45:19,927 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 16:45:19,927 - quick_intent_merger - INFO - Original ML classification: database_query_list with confidence 0.5
2025-03-17 16:45:19,927 - quick_intent_merger - INFO - Pattern matches: ['\\b(sort|order|arrange).*(ascending|asc|low to high|smallest to largest)', '\\b(sort|order|arrange|list).*\\b(by|on)\\b']
2025-03-17 16:45:19,927 - quick_intent_merger - INFO - Low ML confidence (0.5). Using pattern match: {'intent': 'database_query_sort', 'sub_intent': 'database_query_sort_ascending'}
2025-03-17 16:45:19,928 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_ascending'}
2025-03-17 16:45:19,928 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_sort', 'confidence': 0.9, 'sub_intent': 'database_query_sort_ascending'}
2025-03-17 16:45:19,928 - model.chatbot_engine - INFO - Sub-intent: database_query_sort_ascending, Parent intent: database_query_sort
2025-03-17 16:45:19,929 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'trades', 'attribute': 'date', 'aggregation': None, 'operation': 'sort_asc', 'constraints': []}
2025-03-17 16:45:19,929 - query_processor - INFO - Processing query with intent: database_query_sort, sub-intent: database_query_sort_ascending, confidence: 0.9
2025-03-17 16:45:19,929 - query_processor - INFO - Query semantics: {'entity_type': 'trades', 'attribute': 'date', 'aggregation': None, 'operation': 'sort_asc', 'constraints': []}
2025-03-17 16:45:19,931 - query_processor - INFO - Generated SQL query: SELECT trades.trade_date, trades.quantity, trades.trade_date FROM trades JOIN orders ON trades.trade_id = orders.trade_id JOIN traders ON trades.trader_id = traders.trader_id JOIN traders ON trades.trader_id = traders.trader_id JOIN accounts ON traders.trader_id = accounts.trader_id JOIN accounts ON None JOIN transactions ON accounts.account_id = transactions.account_id JOIN assets ON trades.asset_id = assets.asset_id JOIN assets ON trades.asset_id = assets.asset_id JOIN price_history ON assets.asset_id = price_history.asset_id WHERE orders.trade_id = trades.trade_id AND traders.trader_id = trades.trader_id AND traders.trader_id = accounts.trader_id AND accounts.account_id = transactions.account_id AND assets.asset_id = trades.asset_id AND assets.asset_id = price_history.asset_id ORDER BY trades.trade_date ASC LIMIT 10
2025-03-17 16:45:19,932 - database_connector - ERROR - Error executing query: 1066 (42000): Not unique table/alias: 'traders'
2025-03-17 16:45:19,932 - query_processor - INFO - No results returned from database
2025-03-17 16:45:19,932 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:45:19] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:45:26,640 - model.intent_classifier - ERROR - Model or tokenizer not initialized
2025-03-17 16:45:26,641 - quick_intent_merger - INFO - Original ML classification: database_query_list with confidence 0.5
2025-03-17 16:45:26,641 - quick_intent_merger - INFO - Pattern matches: ['\\b(median|middle|average|mid|center|mean)', '\\b(where|with|having|that have|filter)\\b']
2025-03-17 16:45:26,641 - quick_intent_merger - INFO - Low ML confidence (0.5). Using pattern match: {'intent': 'database_query_comparative', 'sub_intent': 'database_query_comparative_middle'}
2025-03-17 16:45:26,641 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_middle'}
2025-03-17 16:45:26,641 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_middle'}
2025-03-17 16:45:26,641 - model.chatbot_engine - INFO - Sub-intent: database_query_comparative_middle, Parent intent: database_query_comparative
2025-03-17 16:45:26,641 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'avg', 'constraints': [('median', 'price')]}
2025-03-17 16:45:26,641 - query_processor - INFO - Processing query with intent: database_query_comparative, sub-intent: database_query_comparative_middle, confidence: 0.9
2025-03-17 16:45:26,641 - query_processor - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'avg', 'constraints': [('median', 'price')]}
2025-03-17 16:45:26,641 - query_processor - INFO - Generated SQL query: SELECT assets.name, assets.asset_type, trades.price FROM assets JOIN trades ON assets.asset_id = trades.asset_id JOIN price_history ON assets.asset_id = price_history.asset_id WHERE assets.asset_id = trades.asset_id AND assets.asset_id = price_history.asset_id LIMIT 10 OFFSET (SELECT COUNT(*)/2 - 5 FROM assets)
2025-03-17 16:45:26,642 - database_connector - ERROR - Error executing query: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(SELECT COUNT(*)/2 - 5 FROM assets)' at line 1
2025-03-17 16:45:26,642 - query_processor - INFO - No results returned from database
2025-03-17 16:45:26,643 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:45:26] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:50:32,353 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 16:50:32,354 - __main__ - INFO - Loading intent classifier model from models/intent_classifier
2025-03-17 16:50:32,354 - model.intent_classifier - INFO - Loading model from directory: models/intent_classifier
2025-03-17 16:50:32,355 - model.intent_classifier - INFO - Loaded model configuration from models/intent_classifier\model_config.json
2025-03-17 16:50:32,355 - model.intent_classifier - INFO - Configuration: vocab_size=10000, embedding_dim=150, max_sequence_length=50, use_post_processor=True
2025-03-17 16:50:32,355 - model.intent_classifier - INFO - Loaded 12 intent classes from models/intent_classifier\intent_classes.json
2025-03-17 16:50:32,355 - model.intent_classifier - INFO - Using intent classes: ['database_query_comparative', 'database_query_count', 'database_query_detailed', 'database_query_filter', 'database_query_list', 'database_query_recent', 'database_query_sensitive', 'database_query_sort', 'database_query_specific_id', 'goodbye', 'greeting', 'help']
2025-03-17 16:50:32,356 - model.intent_classifier - INFO - Loaded tokenizer from models/intent_classifier\tokenizer.json
2025-03-17 16:50:35,083 - model.intent_classifier - INFO - Loaded model from models/intent_classifier\model.h5
2025-03-17 16:50:35,085 - intent_processor - INFO - Loaded 5 intent mappings
2025-03-17 16:50:35,086 - intent_processor - INFO - Loaded original intent examples
2025-03-17 16:50:35,086 - model.intent_classifier - INFO - Initialized intent post-processor
2025-03-17 16:50:35,086 - model.intent_classifier - INFO - Model, tokenizer, and intent classes successfully loaded
2025-03-17 16:50:35,088 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 16:50:35,088 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 16:50:35,088 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 16:50:35,090 - __main__ - INFO - All components initialized successfully
2025-03-17 16:50:37,143 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 16:50:37,143 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 16:50:37,145 - __main__ - INFO - Training API routes added successfully
2025-03-17 16:50:37,145 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 16:50:37,158 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.171:5000
2025-03-17 16:50:37,159 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-17 16:50:37,161 - werkzeug - INFO -  * Restarting with stat
2025-03-17 16:50:41,599 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-17 16:50:41,599 - __main__ - INFO - Loading intent classifier model from models/intent_classifier
2025-03-17 16:50:41,599 - model.intent_classifier - INFO - Loading model from directory: models/intent_classifier
2025-03-17 16:50:41,599 - model.intent_classifier - INFO - Loaded model configuration from models/intent_classifier\model_config.json
2025-03-17 16:50:41,600 - model.intent_classifier - INFO - Configuration: vocab_size=10000, embedding_dim=150, max_sequence_length=50, use_post_processor=True
2025-03-17 16:50:41,600 - model.intent_classifier - INFO - Loaded 12 intent classes from models/intent_classifier\intent_classes.json
2025-03-17 16:50:41,600 - model.intent_classifier - INFO - Using intent classes: ['database_query_comparative', 'database_query_count', 'database_query_detailed', 'database_query_filter', 'database_query_list', 'database_query_recent', 'database_query_sensitive', 'database_query_sort', 'database_query_specific_id', 'goodbye', 'greeting', 'help']
2025-03-17 16:50:41,601 - model.intent_classifier - INFO - Loaded tokenizer from models/intent_classifier\tokenizer.json
2025-03-17 16:50:45,779 - model.intent_classifier - INFO - Loaded model from models/intent_classifier\model.h5
2025-03-17 16:50:45,781 - intent_processor - INFO - Loaded 5 intent mappings
2025-03-17 16:50:45,783 - intent_processor - INFO - Loaded original intent examples
2025-03-17 16:50:45,783 - model.intent_classifier - INFO - Initialized intent post-processor
2025-03-17 16:50:45,783 - model.intent_classifier - INFO - Model, tokenizer, and intent classes successfully loaded
2025-03-17 16:50:45,787 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-17 16:50:45,787 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-17 16:50:45,787 - __main__ - INFO - Speech recognition initialized successfully
2025-03-17 16:50:45,792 - __main__ - INFO - All components initialized successfully
2025-03-17 16:50:47,840 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-17 16:50:47,840 - __main__ - INFO - Initializing speech recognition routes
2025-03-17 16:50:47,844 - __main__ - INFO - Training API routes added successfully
2025-03-17 16:50:47,844 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-17 16:50:47,856 - werkzeug - WARNING -  * Debugger is active!
2025-03-17 16:50:47,864 - werkzeug - INFO -  * Debugger PIN: 103-700-790
2025-03-17 16:50:47,903 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:50:47] "GET / HTTP/1.1" 200 -
2025-03-17 16:50:48,090 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:50:48] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-03-17 16:50:48,097 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:50:48] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-03-17 16:50:48,099 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:50:48] "[36mGET /static/js/speech.js HTTP/1.1[0m" 304 -
2025-03-17 16:50:59,477 - quick_intent_merger - INFO - Original ML classification: database_query_comparative with confidence 0.7462316155433655
2025-03-17 16:50:59,478 - quick_intent_merger - INFO - Pattern matches: ['\\b(lowest|minimum|least|bottom|smallest|cheapest|worst)', '\\b(count|how many|number of|total number)', '\\b(where|with|having|that have|filter)\\b']
2025-03-17 16:50:59,478 - quick_intent_merger - INFO - Low ML confidence (0.7462316155433655). Using pattern match: {'intent': 'database_query_comparative', 'sub_intent': 'database_query_comparative_lowest'}
2025-03-17 16:50:59,478 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_lowest'}
2025-03-17 16:50:59,478 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_lowest'}
2025-03-17 16:50:59,478 - model.chatbot_engine - INFO - Sub-intent: database_query_comparative_lowest, Parent intent: database_query_comparative
2025-03-17 16:50:59,479 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'transaction_count', 'aggregation': 'count', 'operation': 'min', 'constraints': [('lowest', 'transaction')]}
2025-03-17 16:50:59,479 - query_processor - INFO - Processing query with intent: database_query_comparative, sub-intent: database_query_comparative_lowest, confidence: 0.9
2025-03-17 16:50:59,480 - query_processor - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'transaction_count', 'aggregation': 'count', 'operation': 'min', 'constraints': [('lowest', 'transaction')]}
2025-03-17 16:50:59,480 - query_processor - INFO - Generated SQL query: SELECT traders.name, traders.registration_date, COUNT(transactions.transaction_id) as transaction_count FROM traders JOIN transactions ON traders.trader_id = accounts.trader_id AND accounts.account_id = transactions.account_id WHERE traders.trader_id = accounts.trader_id AND accounts.account_id = transactions.account_id GROUP BY traders.trader_id ORDER BY transaction_count ASC LIMIT 10
2025-03-17 16:50:59,481 - database_connector - ERROR - Error executing query: 1054 (42S22): Unknown column 'accounts.trader_id' in 'where clause'
2025-03-17 16:50:59,481 - query_processor - INFO - No results returned from database
2025-03-17 16:50:59,482 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:50:59] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:51:13,699 - quick_intent_merger - INFO - Original ML classification: database_query_sort with confidence 1.0
2025-03-17 16:51:13,699 - quick_intent_merger - INFO - Pattern matches: ['\\b(sort|order|arrange).*(ascending|asc|low to high|smallest to largest)', '\\b(sort|order|arrange|list).*\\b(by|on)\\b']
2025-03-17 16:51:13,699 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_sort', 'confidence': 1.0, 'sub_intent': 'database_query_sort_ascending', 'sub_confidence': 0.9}
2025-03-17 16:51:13,699 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_sort', 'confidence': 1.0, 'sub_intent': 'database_query_sort_ascending', 'sub_confidence': 0.9}
2025-03-17 16:51:13,699 - model.chatbot_engine - INFO - Sub-intent: database_query_sort_ascending, Parent intent: database_query_sort
2025-03-17 16:51:13,700 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'trades', 'attribute': 'date', 'aggregation': None, 'operation': 'sort_asc', 'constraints': []}
2025-03-17 16:51:13,700 - query_processor - INFO - Processing query with intent: database_query_sort, sub-intent: database_query_sort_ascending, confidence: 1.0
2025-03-17 16:51:13,700 - query_processor - INFO - Query semantics: {'entity_type': 'trades', 'attribute': 'date', 'aggregation': None, 'operation': 'sort_asc', 'constraints': []}
2025-03-17 16:51:13,701 - query_processor - INFO - Generated SQL query: SELECT trades.trade_date, trades.quantity, trades.trade_date FROM trades JOIN orders ON trades.trade_id = orders.trade_id JOIN traders ON trades.trader_id = traders.trader_id JOIN traders ON trades.trader_id = traders.trader_id JOIN accounts ON traders.trader_id = accounts.trader_id JOIN accounts ON None JOIN transactions ON accounts.account_id = transactions.account_id JOIN assets ON trades.asset_id = assets.asset_id JOIN assets ON trades.asset_id = assets.asset_id JOIN price_history ON assets.asset_id = price_history.asset_id WHERE orders.trade_id = trades.trade_id AND traders.trader_id = trades.trader_id AND traders.trader_id = accounts.trader_id AND accounts.account_id = transactions.account_id AND assets.asset_id = trades.asset_id AND assets.asset_id = price_history.asset_id ORDER BY trades.trade_date ASC LIMIT 10
2025-03-17 16:51:13,701 - database_connector - ERROR - Error executing query: 1066 (42000): Not unique table/alias: 'traders'
2025-03-17 16:51:13,702 - query_processor - INFO - No results returned from database
2025-03-17 16:51:13,702 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:51:13] "POST /api/chat HTTP/1.1" 200 -
2025-03-17 16:51:21,854 - quick_intent_merger - INFO - Original ML classification: database_query_comparative with confidence 1.0
2025-03-17 16:51:21,854 - quick_intent_merger - INFO - Pattern matches: ['\\b(median|middle|average|mid|center|mean)', '\\b(where|with|having|that have|filter)\\b']
2025-03-17 16:51:21,854 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_comparative', 'confidence': 1.0, 'sub_intent': 'database_query_comparative_middle', 'sub_confidence': 0.9}
2025-03-17 16:51:21,854 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_comparative', 'confidence': 1.0, 'sub_intent': 'database_query_comparative_middle', 'sub_confidence': 0.9}
2025-03-17 16:51:21,855 - model.chatbot_engine - INFO - Sub-intent: database_query_comparative_middle, Parent intent: database_query_comparative
2025-03-17 16:51:21,855 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'avg', 'constraints': [('median', 'price')]}
2025-03-17 16:51:21,855 - query_processor - INFO - Processing query with intent: database_query_comparative, sub-intent: database_query_comparative_middle, confidence: 1.0
2025-03-17 16:51:21,855 - query_processor - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'avg', 'constraints': [('median', 'price')]}
2025-03-17 16:51:21,855 - query_processor - INFO - Generated SQL query: SELECT assets.name, assets.asset_type, trades.price FROM assets JOIN trades ON assets.asset_id = trades.asset_id JOIN price_history ON assets.asset_id = price_history.asset_id WHERE assets.asset_id = trades.asset_id AND assets.asset_id = price_history.asset_id LIMIT 10 OFFSET (SELECT COUNT(*)/2 - 5 FROM assets)
2025-03-17 16:51:21,855 - database_connector - ERROR - Error executing query: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(SELECT COUNT(*)/2 - 5 FROM assets)' at line 1
2025-03-17 16:51:21,855 - query_processor - INFO - No results returned from database
2025-03-17 16:51:21,856 - werkzeug - INFO - 127.0.0.1 - - [17/Mar/2025 16:51:21] "POST /api/chat HTTP/1.1" 200 -
2025-03-18 12:32:22,288 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-18 12:32:22,297 - __main__ - INFO - Loading intent classifier model from models/intent_classifier
2025-03-18 12:32:22,297 - model.intent_classifier - INFO - Loading model from directory: models/intent_classifier
2025-03-18 12:32:22,298 - model.intent_classifier - INFO - Loaded model configuration from models/intent_classifier\model_config.json
2025-03-18 12:32:22,298 - model.intent_classifier - INFO - Configuration: vocab_size=10000, embedding_dim=150, max_sequence_length=50, use_post_processor=True
2025-03-18 12:32:22,298 - model.intent_classifier - INFO - Loaded 12 intent classes from models/intent_classifier\intent_classes.json
2025-03-18 12:32:22,298 - model.intent_classifier - INFO - Using intent classes: ['database_query_comparative', 'database_query_count', 'database_query_detailed', 'database_query_filter', 'database_query_list', 'database_query_recent', 'database_query_sensitive', 'database_query_sort', 'database_query_specific_id', 'goodbye', 'greeting', 'help']
2025-03-18 12:32:22,299 - model.intent_classifier - INFO - Loaded tokenizer from models/intent_classifier\tokenizer.json
2025-03-18 12:32:25,528 - model.intent_classifier - INFO - Loaded model from models/intent_classifier\model.h5
2025-03-18 12:32:25,530 - intent_processor - INFO - Loaded 5 intent mappings
2025-03-18 12:32:25,532 - intent_processor - INFO - Loaded original intent examples
2025-03-18 12:32:25,532 - model.intent_classifier - INFO - Initialized intent post-processor
2025-03-18 12:32:25,532 - model.intent_classifier - INFO - Model, tokenizer, and intent classes successfully loaded
2025-03-18 12:32:25,534 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-18 12:32:25,534 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-18 12:32:25,534 - __main__ - INFO - Speech recognition initialized successfully
2025-03-18 12:32:25,537 - __main__ - INFO - All components initialized successfully
2025-03-18 12:32:27,636 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-18 12:32:27,637 - __main__ - INFO - Initializing speech recognition routes
2025-03-18 12:32:27,638 - __main__ - INFO - Training API routes added successfully
2025-03-18 12:32:27,639 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-18 12:32:27,655 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.171:5000
2025-03-18 12:32:27,655 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-03-18 12:32:27,658 - werkzeug - INFO -  * Restarting with stat
2025-03-18 12:32:32,120 - encryption_manager - INFO - Homomorphic encryption context initialized
2025-03-18 12:32:32,121 - __main__ - INFO - Loading intent classifier model from models/intent_classifier
2025-03-18 12:32:32,121 - model.intent_classifier - INFO - Loading model from directory: models/intent_classifier
2025-03-18 12:32:32,121 - model.intent_classifier - INFO - Loaded model configuration from models/intent_classifier\model_config.json
2025-03-18 12:32:32,121 - model.intent_classifier - INFO - Configuration: vocab_size=10000, embedding_dim=150, max_sequence_length=50, use_post_processor=True
2025-03-18 12:32:32,121 - model.intent_classifier - INFO - Loaded 12 intent classes from models/intent_classifier\intent_classes.json
2025-03-18 12:32:32,121 - model.intent_classifier - INFO - Using intent classes: ['database_query_comparative', 'database_query_count', 'database_query_detailed', 'database_query_filter', 'database_query_list', 'database_query_recent', 'database_query_sensitive', 'database_query_sort', 'database_query_specific_id', 'goodbye', 'greeting', 'help']
2025-03-18 12:32:32,122 - model.intent_classifier - INFO - Loaded tokenizer from models/intent_classifier\tokenizer.json
2025-03-18 12:32:36,251 - model.intent_classifier - INFO - Loaded model from models/intent_classifier\model.h5
2025-03-18 12:32:36,252 - intent_processor - INFO - Loaded 5 intent mappings
2025-03-18 12:32:36,254 - intent_processor - INFO - Loaded original intent examples
2025-03-18 12:32:36,254 - model.intent_classifier - INFO - Initialized intent post-processor
2025-03-18 12:32:36,254 - model.intent_classifier - INFO - Model, tokenizer, and intent classes successfully loaded
2025-03-18 12:32:36,258 - model.chatbot_engine - INFO - Intent merger initialized
2025-03-18 12:32:36,258 - speech.speech_recognition - INFO - Secure speech recognition module initialized
2025-03-18 12:32:36,258 - __main__ - INFO - Speech recognition initialized successfully
2025-03-18 12:32:36,262 - __main__ - INFO - All components initialized successfully
2025-03-18 12:32:38,308 - database_connector - INFO - Connected to MySQL database: fm_database
2025-03-18 12:32:38,309 - __main__ - INFO - Initializing speech recognition routes
2025-03-18 12:32:38,311 - __main__ - INFO - Training API routes added successfully
2025-03-18 12:32:38,312 - api.flask_api - INFO - Starting server on 0.0.0.0:5000
2025-03-18 12:32:38,324 - werkzeug - WARNING -  * Debugger is active!
2025-03-18 12:32:38,329 - werkzeug - INFO -  * Debugger PIN: 103-700-790
2025-03-18 12:32:38,378 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 12:32:38] "GET / HTTP/1.1" 200 -
2025-03-18 12:32:38,562 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 12:32:38] "[36mGET /static/js/speech.js HTTP/1.1[0m" 304 -
2025-03-18 12:32:38,566 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 12:32:38] "[36mGET /static/js/script.js HTTP/1.1[0m" 304 -
2025-03-18 12:32:38,568 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 12:32:38] "[36mGET /static/css/style.css HTTP/1.1[0m" 304 -
2025-03-18 12:32:38,678 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 12:32:38] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-03-18 12:32:52,120 - quick_intent_merger - INFO - Original ML classification: database_query_comparative with confidence 1.0
2025-03-18 12:32:52,120 - quick_intent_merger - INFO - Pattern matches: ['\\b(highest|maximum|most|top|greatest|largest|biggest)', '\\b(where|with|having|that have|filter)\\b']
2025-03-18 12:32:52,121 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_comparative', 'confidence': 1.0, 'sub_intent': 'database_query_comparative_highest', 'sub_confidence': 0.9}
2025-03-18 12:32:52,121 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_comparative', 'confidence': 1.0, 'sub_intent': 'database_query_comparative_highest', 'sub_confidence': 0.9}
2025-03-18 12:32:52,121 - model.chatbot_engine - INFO - Sub-intent: database_query_comparative_highest, Parent intent: database_query_comparative
2025-03-18 12:32:52,122 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'trade_count', 'aggregation': 'count', 'operation': 'max', 'constraints': [('highest', 'account')]}
2025-03-18 12:32:52,122 - query_processor - INFO - Processing query with intent: database_query_comparative, sub-intent: database_query_comparative_highest, confidence: 1.0
2025-03-18 12:32:52,122 - query_processor - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'trade_count', 'aggregation': 'count', 'operation': 'max', 'constraints': [('highest', 'account')]}
2025-03-18 12:32:52,122 - query_processor - INFO - Generated SQL query: SELECT traders.name, traders.registration_date, COUNT(trades.trade_id) as trade_count FROM traders JOIN trades ON traders.trader_id = trades.trader_id WHERE traders.trader_id = trades.trader_id GROUP BY traders.trader_id ORDER BY trade_count DESC LIMIT 10
2025-03-18 12:32:52,159 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 12:32:52] "POST /api/chat HTTP/1.1" 200 -
2025-03-18 12:33:02,744 - quick_intent_merger - INFO - Original ML classification: database_query_sort with confidence 1.0
2025-03-18 12:33:02,746 - quick_intent_merger - INFO - Pattern matches: ['\\b(sort|order|arrange).*(descending|desc|high to low|largest to smallest)', '\\b(sort|order|arrange|list).*\\b(by|on)\\b']
2025-03-18 12:33:02,746 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_sort', 'confidence': 1.0, 'sub_intent': 'database_query_sort_descending', 'sub_confidence': 0.9}
2025-03-18 12:33:02,746 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_sort', 'confidence': 1.0, 'sub_intent': 'database_query_sort_descending', 'sub_confidence': 0.9}
2025-03-18 12:33:02,746 - model.chatbot_engine - INFO - Sub-intent: database_query_sort_descending, Parent intent: database_query_sort
2025-03-18 12:33:02,746 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'sort_desc', 'constraints': []}
2025-03-18 12:33:02,746 - query_processor - INFO - Processing query with intent: database_query_sort, sub-intent: database_query_sort_descending, confidence: 1.0
2025-03-18 12:33:02,746 - query_processor - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'sort_desc', 'constraints': []}
2025-03-18 12:33:02,748 - query_processor - INFO - Generated SQL query: SELECT assets.name, assets.asset_type, trades.price FROM assets JOIN trades ON assets.asset_id = trades.asset_id JOIN price_history ON assets.asset_id = price_history.asset_id WHERE assets.asset_id = trades.asset_id AND assets.asset_id = price_history.asset_id ORDER BY trades.price DESC LIMIT 10
2025-03-18 12:33:02,771 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 12:33:02] "POST /api/chat HTTP/1.1" 200 -
2025-03-18 12:33:12,619 - quick_intent_merger - INFO - Original ML classification: database_query_comparative with confidence 0.7462316155433655
2025-03-18 12:33:12,619 - quick_intent_merger - INFO - Pattern matches: ['\\b(lowest|minimum|least|bottom|smallest|cheapest|worst)', '\\b(count|how many|number of|total number)', '\\b(where|with|having|that have|filter)\\b']
2025-03-18 12:33:12,620 - quick_intent_merger - INFO - Low ML confidence (0.7462316155433655). Using pattern match: {'intent': 'database_query_comparative', 'sub_intent': 'database_query_comparative_lowest'}
2025-03-18 12:33:12,620 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_lowest'}
2025-03-18 12:33:12,620 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_comparative', 'confidence': 0.9, 'sub_intent': 'database_query_comparative_lowest'}
2025-03-18 12:33:12,621 - model.chatbot_engine - INFO - Sub-intent: database_query_comparative_lowest, Parent intent: database_query_comparative
2025-03-18 12:33:12,621 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'transaction_count', 'aggregation': 'count', 'operation': 'min', 'constraints': [('lowest', 'transaction')]}
2025-03-18 12:33:12,621 - query_processor - INFO - Processing query with intent: database_query_comparative, sub-intent: database_query_comparative_lowest, confidence: 0.9
2025-03-18 12:33:12,621 - query_processor - INFO - Query semantics: {'entity_type': 'traders', 'attribute': 'transaction_count', 'aggregation': 'count', 'operation': 'min', 'constraints': [('lowest', 'transaction')]}
2025-03-18 12:33:12,621 - query_processor - INFO - Generated SQL query: SELECT traders.name, traders.registration_date, COUNT(transactions.transaction_id) as transaction_count FROM traders JOIN transactions ON traders.trader_id = accounts.trader_id AND accounts.account_id = transactions.account_id WHERE traders.trader_id = accounts.trader_id AND accounts.account_id = transactions.account_id GROUP BY traders.trader_id ORDER BY transaction_count ASC LIMIT 10
2025-03-18 12:33:12,624 - database_connector - ERROR - Error executing query: 1054 (42S22): Unknown column 'accounts.trader_id' in 'where clause'
2025-03-18 12:33:12,624 - query_processor - INFO - No results returned from database
2025-03-18 12:33:12,624 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 12:33:12] "POST /api/chat HTTP/1.1" 200 -
2025-03-18 12:35:27,256 - quick_intent_merger - INFO - Original ML classification: database_query_sort with confidence 1.0
2025-03-18 12:35:27,257 - quick_intent_merger - INFO - Pattern matches: ['\\b(sort|order|arrange).*(ascending|asc|low to high|smallest to largest)', '\\b(sort|order|arrange|list).*\\b(by|on)\\b']
2025-03-18 12:35:27,257 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_sort', 'confidence': 1.0, 'sub_intent': 'database_query_sort_ascending', 'sub_confidence': 0.9}
2025-03-18 12:35:27,257 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_sort', 'confidence': 1.0, 'sub_intent': 'database_query_sort_ascending', 'sub_confidence': 0.9}
2025-03-18 12:35:27,257 - model.chatbot_engine - INFO - Sub-intent: database_query_sort_ascending, Parent intent: database_query_sort
2025-03-18 12:35:27,258 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'trades', 'attribute': 'date', 'aggregation': None, 'operation': 'sort_asc', 'constraints': []}
2025-03-18 12:35:27,258 - query_processor - INFO - Processing query with intent: database_query_sort, sub-intent: database_query_sort_ascending, confidence: 1.0
2025-03-18 12:35:27,258 - query_processor - INFO - Query semantics: {'entity_type': 'trades', 'attribute': 'date', 'aggregation': None, 'operation': 'sort_asc', 'constraints': []}
2025-03-18 12:35:27,259 - query_processor - INFO - Generated SQL query: SELECT trades.trade_date, trades.quantity, trades.trade_date FROM trades JOIN orders ON trades.trade_id = orders.trade_id JOIN traders ON trades.trader_id = traders.trader_id JOIN traders ON trades.trader_id = traders.trader_id JOIN accounts ON traders.trader_id = accounts.trader_id JOIN accounts ON None JOIN transactions ON accounts.account_id = transactions.account_id JOIN assets ON trades.asset_id = assets.asset_id JOIN assets ON trades.asset_id = assets.asset_id JOIN price_history ON assets.asset_id = price_history.asset_id WHERE orders.trade_id = trades.trade_id AND traders.trader_id = trades.trader_id AND traders.trader_id = accounts.trader_id AND accounts.account_id = transactions.account_id AND assets.asset_id = trades.asset_id AND assets.asset_id = price_history.asset_id ORDER BY trades.trade_date ASC LIMIT 10
2025-03-18 12:35:27,260 - database_connector - ERROR - Error executing query: 1066 (42000): Not unique table/alias: 'traders'
2025-03-18 12:35:27,260 - query_processor - INFO - No results returned from database
2025-03-18 12:35:27,260 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 12:35:27] "POST /api/chat HTTP/1.1" 200 -
2025-03-18 12:35:35,241 - quick_intent_merger - INFO - Original ML classification: database_query_comparative with confidence 1.0
2025-03-18 12:35:35,241 - quick_intent_merger - INFO - Pattern matches: ['\\b(median|middle|average|mid|center|mean)', '\\b(where|with|having|that have|filter)\\b']
2025-03-18 12:35:35,241 - quick_intent_merger - INFO - Final intent classification: {'intent': 'database_query_comparative', 'confidence': 1.0, 'sub_intent': 'database_query_comparative_middle', 'sub_confidence': 0.9}
2025-03-18 12:35:35,241 - model.chatbot_engine - INFO - Classified intent: {'intent': 'database_query_comparative', 'confidence': 1.0, 'sub_intent': 'database_query_comparative_middle', 'sub_confidence': 0.9}
2025-03-18 12:35:35,242 - model.chatbot_engine - INFO - Sub-intent: database_query_comparative_middle, Parent intent: database_query_comparative
2025-03-18 12:35:35,242 - model.chatbot_engine - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'avg', 'constraints': [('median', 'price')]}
2025-03-18 12:35:35,242 - query_processor - INFO - Processing query with intent: database_query_comparative, sub-intent: database_query_comparative_middle, confidence: 1.0
2025-03-18 12:35:35,242 - query_processor - INFO - Query semantics: {'entity_type': 'assets', 'attribute': 'price', 'aggregation': None, 'operation': 'avg', 'constraints': [('median', 'price')]}
2025-03-18 12:35:35,242 - query_processor - INFO - Generated SQL query: SELECT assets.name, assets.asset_type, trades.price FROM assets JOIN trades ON assets.asset_id = trades.asset_id JOIN price_history ON assets.asset_id = price_history.asset_id WHERE assets.asset_id = trades.asset_id AND assets.asset_id = price_history.asset_id LIMIT 10 OFFSET (SELECT COUNT(*)/2 - 5 FROM assets)
2025-03-18 12:35:35,243 - database_connector - ERROR - Error executing query: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(SELECT COUNT(*)/2 - 5 FROM assets)' at line 1
2025-03-18 12:35:35,243 - query_processor - INFO - No results returned from database
2025-03-18 12:35:35,244 - werkzeug - INFO - 127.0.0.1 - - [18/Mar/2025 12:35:35] "POST /api/chat HTTP/1.1" 200 -
